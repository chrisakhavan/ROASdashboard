<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Casino ROAS Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        body { margin: 0; padding: 0; font-family: system-ui, -apple-system, sans-serif; }
        .stat-card { transition: all 0.3s ease; }
        .stat-card:hover { transform: translateY(-2px); }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 min-h-screen">
    <div class="max-w-7xl mx-auto p-6">
        <!-- Header -->
        <div class="mb-8">
            <h1 class="text-4xl font-bold text-white mb-2 flex items-center gap-3">
                <svg class="text-yellow-400" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                </svg>
                Crypto Casino ROAS Dashboard
            </h1>
            <p class="text-purple-200">Marketing Performance & Return on Ad Spend Analytics</p>
        </div>

        <!-- Filters -->
        <div class="bg-slate-800/50 backdrop-blur-sm rounded-lg p-4 mb-6 border border-purple-500/30">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div>
                    <label class="block text-sm font-medium text-purple-200 mb-2">Channel</label>
                    <select id="channelFilter" class="w-full bg-slate-700 text-white border border-purple-500/50 rounded-lg px-3 py-2">
                        <option>All Channels</option>
                        <option>Paid Media</option>
                        <option>Gambling Streamers</option>
                        <option>Sports Cappers</option>
                        <option>Influencer Affiliates</option>
                        <option>Traffic Affiliates</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-purple-200 mb-2">Country</label>
                    <select id="countryFilter" class="w-full bg-slate-700 text-white border border-purple-500/50 rounded-lg px-3 py-2">
                        <option>All Countries</option>
                        <option>USA</option>
                        <option>Canada</option>
                        <option>UK</option>
                        <option>Germany</option>
                        <option>Brazil</option>
                        <option>Japan</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-purple-200 mb-2">Device Type</label>
                    <select id="deviceFilter" class="w-full bg-slate-700 text-white border border-purple-500/50 rounded-lg px-3 py-2">
                        <option>All Devices</option>
                        <option>Web</option>
                        <option>Mobile</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-purple-200 mb-2">Time Period</label>
                    <select id="metricFilter" class="w-full bg-slate-700 text-white border border-purple-500/50 rounded-lg px-3 py-2">
                        <option>Day 7</option>
                        <option>Day 30</option>
                        <option>Day 90</option>
                        <option>Day 180</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Stats Cards -->
        <div id="statsCards" class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"></div>

        <!-- ROAS Comparison Table -->
        <div class="bg-slate-800/50 backdrop-blur-sm rounded-lg p-6 mb-6 border border-purple-500/30">
            <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                <svg class="text-purple-400" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                ROAS Comparison by Time Period
            </h2>
            <div class="overflow-x-auto">
                <table class="w-full text-left" id="roasTable"></table>
            </div>
        </div>

        <!-- Charts -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <div class="bg-slate-800/50 backdrop-blur-sm rounded-lg p-6 border border-purple-500/30">
                <h2 class="text-xl font-bold text-white mb-4">ROAS Trend by Cohort Week</h2>
                <canvas id="trendChart"></canvas>
            </div>
            <div class="bg-slate-800/50 backdrop-blur-sm rounded-lg p-6 border border-purple-500/30">
                <h2 class="text-xl font-bold text-white mb-4">Latest Week Performance</h2>
                <canvas id="barChart"></canvas>
            </div>
        </div>

        <!-- Cohort Matrix -->
        <div class="bg-slate-800/50 backdrop-blur-sm rounded-lg p-6 mb-6 border border-purple-500/30">
            <h2 class="text-xl font-bold text-white mb-4">Cohort Performance Matrix</h2>
            <div class="overflow-x-auto">
                <table class="w-full" id="cohortMatrix"></table>
            </div>
        </div>

        <!-- Footer -->
        <div class="p-4 bg-slate-800/30 rounded-lg border border-purple-500/20">
            <p class="text-purple-200 text-sm" id="filterStatus"></p>
            <p class="text-purple-300 text-xs mt-2">ROAS values represent revenue multiple on advertising spend. Data updated in real-time based on cohorted user behavior.</p>
        </div>
    </div>

    <script>
        // Configuration
        const channels = ['Paid Media', 'Gambling Streamers', 'Sports Cappers', 'Influencer Affiliates', 'Traffic Affiliates'];
        const channelColors = {
            'Paid Media': '#3b82f6',
            'Gambling Streamers': '#8b5cf6',
            'Sports Cappers': '#10b981',
            'Influencer Affiliates': '#f59e0b',
            'Traffic Affiliates': '#ef4444'
        };

        // Generate cohort data
        function generateCohortData() {
            const weeks = [];
            const startDate = new Date('2024-10-01');
            
            for (let i = 0; i < 12; i++) {
                const weekDate = new Date(startDate);
                weekDate.setDate(startDate.getDate() + (i * 7));
                
                const weekData = {
                    week: `Week ${i + 1}`,
                    date: weekDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })
                };
                
                channels.forEach(channel => {
                    const baseMultiplier = channel === 'Gambling Streamers' ? 1.5 : channel === 'Traffic Affiliates' ? 0.7 : 1;
                    weekData[`${channel}_d7`] = (0.8 + Math.random() * 0.6) * baseMultiplier;
                    weekData[`${channel}_d30`] = (1.2 + Math.random() * 0.8) * baseMultiplier;
                    weekData[`${channel}_d90`] = (1.8 + Math.random() * 1.2) * baseMultiplier;
                    weekData[`${channel}_d180`] = (2.5 + Math.random() * 1.5) * baseMultiplier;
                });
                
                weeks.push(weekData);
            }
            return weeks;
        }

        const cohortData = generateCohortData();
        let trendChart = null;
        let barChart = null;

        // Render stats cards
        function renderStatsCards() {
            const container = document.getElementById('statsCards');
            const latestWeek = cohortData[cohortData.length - 1];
            const previousWeek = cohortData[cohortData.length - 2];
            
            container.innerHTML = channels.map(channel => {
                const d7Value = latestWeek[`${channel}_d7`];
                const d7Prev = previousWeek[`${channel}_d7`];
                const trend = ((d7Value - d7Prev) / d7Prev) * 100;
                const trendIcon = trend >= 0 
                    ? '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline></svg>'
                    : '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline><polyline points="17 18 23 18 23 12"></polyline></svg>';
                
                return `
                    <div class="stat-card bg-gradient-to-br from-slate-800 to-slate-900 rounded-lg p-4 border border-purple-500/30 hover:border-purple-400/60 cursor-pointer">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-xs font-semibold text-purple-200 uppercase">${channel}</h3>
                            <div class="w-3 h-3 rounded-full" style="background-color: ${channelColors[channel]}"></div>
                        </div>
                        <div class="text-2xl font-bold text-white mb-1">${d7Value.toFixed(2)}x</div>
                        <div class="text-xs text-purple-300 mb-2">Day 7 ROAS</div>
                        <div class="flex items-center gap-1 text-xs ${trend >= 0 ? 'text-green-400' : 'text-red-400'}">
                            ${trendIcon}
                            ${trend > 0 ? '+' : ''}${trend.toFixed(1)}% vs last week
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Render ROAS table
        function renderROASTable() {
            const table = document.getElementById('roasTable');
            const latestWeek = cohortData[cohortData.length - 1];
            const previousWeek = cohortData[cohortData.length - 2];
            
            const headers = '<thead><tr class="border-b border-purple-500/30"><th class="px-4 py-3 text-purple-200 font-semibold">Channel</th><th class="px-4 py-3 text-purple-200 font-semibold text-center">Day 7</th><th class="px-4 py-3 text-purple-200 font-semibold text-center">Day 30</th><th class="px-4 py-3 text-purple-200 font-semibold text-center">Day 90</th><th class="px-4 py-3 text-purple-200 font-semibold text-center">Day 180</th><th class="px-4 py-3 text-purple-200 font-semibold text-center">Trend</th></tr></thead>';
            
            const rows = channels.map(channel => {
                const d7 = latestWeek[`${channel}_d7`];
                const d7Prev = previousWeek[`${channel}_d7`];
                const trend = ((d7 - d7Prev) / d7Prev) * 100;
                const trendIcon = trend >= 0 
                    ? '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline></svg>'
                    : '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline><polyline points="17 18 23 18 23 12"></polyline></svg>';
                
                return `
                    <tr class="border-b border-purple-500/10 hover:bg-purple-500/5 transition-colors">
                        <td class="px-4 py-3">
                            <div class="flex items-center gap-2">
                                <div class="w-2 h-2 rounded-full" style="background-color: ${channelColors[channel]}"></div>
                                <span class="text-white font-medium">${channel}</span>
                            </div>
                        </td>
                        <td class="px-4 py-3 text-center text-white font-semibold">${d7.toFixed(2)}x</td>
                        <td class="px-4 py-3 text-center text-white font-semibold">${latestWeek[`${channel}_d30`].toFixed(2)}x</td>
                        <td class="px-4 py-3 text-center text-white font-semibold">${latestWeek[`${channel}_d90`].toFixed(2)}x</td>
                        <td class="px-4 py-3 text-center text-white font-semibold">${latestWeek[`${channel}_d180`].toFixed(2)}x</td>
                        <td class="px-4 py-3">
                            <div class="flex items-center justify-center gap-1 ${trend >= 0 ? 'text-green-400' : 'text-red-400'}">
                                ${trendIcon}
                                <span class="font-semibold">${trend > 0 ? '+' : ''}${trend.toFixed(1)}%</span>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
            
            table.innerHTML = headers + '<tbody>' + rows + '</tbody>';
        }

        // Render cohort matrix
        function renderCohortMatrix() {
            const table = document.getElementById('cohortMatrix');
            const metric = document.getElementById('metricFilter').value.replace('Day ', 'd');
            
            const headers = '<thead><tr class="border-b border-purple-500/30"><th class="px-3 py-2 text-left text-purple-200 font-semibold">Week</th>' + 
                channels.map(c => `<th class="px-3 py-2 text-center text-purple-200 font-semibold text-sm">${c}</th>`).join('') + 
                '</tr></thead>';
            
            const rows = cohortData.slice().reverse().slice(0, 8).map(week => {
                const cells = channels.map(channel => {
                    const value = week[`${channel}_${metric}`];
                    const intensity = Math.min(value / 5, 1);
                    const bgColor = `rgba(139, 92, 246, ${intensity * 0.5})`;
                    return `<td class="px-3 py-2 text-center text-white font-semibold" style="background-color: ${bgColor}">${value.toFixed(2)}x</td>`;
                }).join('');
                
                return `<tr class="border-b border-purple-500/10"><td class="px-3 py-2 text-white font-medium">${week.date}</td>${cells}</tr>`;
            }).join('');
            
            table.innerHTML = headers + '<tbody>' + rows + '</tbody>';
        }

        // Render trend chart
        function renderTrendChart() {
            const ctx = document.getElementById('trendChart');
            const metric = document.getElementById('metricFilter').value.replace('Day ', 'd');
            const selectedChannel = document.getElementById('channelFilter').value;
            const channelsToShow = selectedChannel === 'All Channels' ? channels : [selectedChannel];
            
            if (trendChart) trendChart.destroy();
            
            trendChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: cohortData.map(d => d.date),
                    datasets: channelsToShow.map(channel => ({
                        label: channel,
                        data: cohortData.map(d => d[`${channel}_${metric}`]),
                        borderColor: channelColors[channel],
                        backgroundColor: channelColors[channel] + '20',
                        tension: 0.4
                    }))
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { labels: { color: '#fff' } }
                    },
                    scales: {
                        y: { ticks: { color: '#94a3b8' }, grid: { color: '#475569' } },
                        x: { ticks: { color: '#94a3b8' }, grid: { color: '#475569' } }
                    }
                }
            });
        }

        // Render bar chart
        function renderBarChart() {
            const ctx = document.getElementById('barChart');
            const metric = document.getElementById('metricFilter').value.replace('Day ', 'd');
            const latestWeek = cohortData[cohortData.length - 1];
            
            if (barChart) barChart.destroy();
            
            barChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: channels.map(c => c.split(' ')[0]),
                    datasets: [{
                        label: 'ROAS',
                        data: channels.map(c => latestWeek[`${c}_${metric}`]),
                        backgroundColor: channels.map(c => channelColors[c])
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: { ticks: { color: '#94a3b8' }, grid: { color: '#475569' } },
                        x: { ticks: { color: '#94a3b8' }, grid: { color: '#475569' } }
                    }
                }
            });
        }

        // Update filter status
        function updateFilterStatus() {
            const channel = document.getElementById('channelFilter').value;
            const country = document.getElementById('countryFilter').value;
            const device = document.getElementById('deviceFilter').value;
            const metric = document.getElementById('metricFilter').value;
            document.getElementById('filterStatus').innerHTML = `<strong>Active Filters:</strong> ${channel} | ${country} | ${device} | ${metric}`;
        }

        // Initialize
        function init() {
            renderStatsCards();
            renderROASTable();
            renderCohortMatrix();
            renderTrendChart();
            renderBarChart();
            updateFilterStatus();
        }

        // Event listeners
        document.getElementById('channelFilter').addEventListener('change', () => { renderTrendChart(); updateFilterStatus(); });
        document.getElementById('metricFilter').addEventListener('change', () => { renderTrendChart(); renderBarChart(); renderCohortMatrix(); updateFilterStatus(); });
        document.getElementById('countryFilter').addEventListener('change', updateFilterStatus);
        document.getElementById('deviceFilter').addEventListener('change', updateFilterStatus);

        // Start
        init();
    </script>
</body>
</html>
